{"version":3,"file":"src_app_nurse-main_nurse-main_module_ts.js","mappings":"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","sources":["./src/app/nurse-main/nurse-main-routing.module.ts","./src/app/nurse-main/nurse-main.module.ts","./src/app/nurse-main/nurse-main.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NurseMainPage } from './nurse-main.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NurseMainPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NurseMainPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NurseMainPageRoutingModule } from './nurse-main-routing.module';\n\nimport { NurseMainPage } from './nurse-main.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NurseMainPageRoutingModule\n  ],\n  declarations: [NurseMainPage]\n})\nexport class NurseMainPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { LocalStorageService } from '../services/local-storage.service';\nimport { MqttService } from '../services/mqtt.service';\nimport { PacientService } from '../services/pacient.service';\nimport { Storage } from '@capacitor/storage';\nimport { Note } from '../models/note';\nimport { MessageModel } from '../models/message-model';\nimport { Pacient } from '../models/pacient';\nimport { UserService } from '../services/user.service';\nimport { User } from '../models/user';\nimport { BedsService } from '../services/beds.service';\n\n\n\n@Component({\n  selector: 'app-nurse-main',\n  templateUrl: './nurse-main.page.html',\n  styleUrls: ['./nurse-main.page.scss'],\n})\nexport class NurseMainPage implements OnInit {\n  private localNurse: User= new User(0,\"\",\"\",\"\",\"\",0,\"\");\n  private bedId = 0;\n  private nurseName=\" \";\n  private nurseId=0;\n  notes: Array<Note> = new Array;\n  public showNotes = false;\n  public pacientLocal: Pacient= new Pacient(0,\"Gus\",\"Bas\",0,0,0);\n  public QRCapture = false;\n\n\n  constructor(private activatedRoute: ActivatedRoute,\n    public localSto: LocalStorageService, \n    private pacientServ:PacientService,\n    public MQTTServ:MqttService,\n    public userlogged: UserService,\n    public bedlocal: BedsService,\n    private router:Router,\n    ) {\n    this.bedId = bedlocal.getBedId();\n   \n   }\n\n  ngOnInit() {\n    this.getParams();\n    \n  }\n  async getParams() {\n    \n    this.localNurse=this.userlogged.getUser();\n    this.nurseName=this.localNurse.username;    \n    let responseNoteTopic=\"/Beds/\"+this.bedId+\"/Pacient\";  \n    this.MQTTServ.MQTTClientLocal.subscribe(responseNoteTopic).on(Message=>{\n      //console.log(\"SystemResponse:  \"+Message.toString());\n      let localMessage = JSON.parse(Message.string);\n      let pacient1 =  JSON.parse(JSON.stringify(localMessage[0]));     \n      //console.log(\"pacientId:\"+ pacient1.pacientId);\n      this.pacientLocal.id=pacient1.pacientId;\n\n      if(Message.toString()==\"Error\"){this.MQTTServ.MQTTClientLocal.unsubscribe(responseNoteTopic);\n      }      \n      console.log(\"Pacient received\")\n    });\n    let topic=\"/User/general\";\n    let b=new MessageModel(this.nurseName,JSON.stringify(this.bedId),  0, \"0\",10);\n    let mqttmessage=JSON.stringify(b);    \n    await this.MQTTServ.sendMesagge(topic, mqttmessage);\n    this.MQTTServ.MQTTClientLocal.unsubscribe(responseNoteTopic);\n\n\n  }\n\n\n  async onClick() {\n    let local=this.bedId;\n   // this.pacientLocal.id=this.bedId;\n    this.notes.splice(0);    \n    console.log(local);\n    \n    //this.showNotes = true;\n    //this.pacientServ.oneAsk(local.pacientNumber);\n  \n   let responseNoteTopic=\"/Pacient/\"+this.pacientLocal.id+\"/notes\";  \n    this.MQTTServ.MQTTClientLocal.subscribe(responseNoteTopic).on(Message=>{\n      console.log(\"respuestaSystem:  \"+Message.toString());\n      if(Message.toString()==\"Error\"){this.MQTTServ.MQTTClientLocal.unsubscribe(responseNoteTopic);\n      }      \n      console.log(\"recibo nota\")\n      //let localMessage = JSON.parse(Message[0].string);      \n      let localMessage = JSON.parse(Message.string);\n      let note1 =  JSON.parse(JSON.stringify(localMessage[0]));     \n      let note2 =  JSON.parse(JSON.stringify(localMessage[1]));     \n      \n      let notaLocal1: Note= new Note(note1.notesId,note1.note,note1.state);\n      let notaLocal2: Note= new Note(note2.notesId,note2.note,note2.state);\n      this.notes.push(notaLocal1);\n      this.notes.push(notaLocal2);\n      \n      this.MQTTServ.MQTTClientLocal.unsubscribe(responseNoteTopic)\n    })\n    \n\n    console.log(\"Pacient:\"+this.pacientLocal.id);\n    let responseInfoTopic=\"/Pacient/\"+this.pacientLocal.id+\"/info\";  \n    this.MQTTServ.MQTTClientLocal.subscribe(responseInfoTopic).on(Message=>{\n        let localMessage = JSON.parse(Message.string);\n        if(Message.toString()==\"Error\"){this.MQTTServ.MQTTClientLocal.unsubscribe(responseInfoTopic);}      \n        //console.log(\"respuestaSystem2:  \"+localMessage[0].lastName);\n        this.pacientLocal.lastName = localMessage[0].lastName;\n        this.pacientLocal.firstName = localMessage[0].firstName;      \n        this.MQTTServ.MQTTClientLocal.unsubscribe(responseInfoTopic)\n      })  \n  \n      let a=new MessageModel(this.nurseName,JSON.stringify(this.pacientLocal.id),  0, \"0\",4);    \n      console.log(a)\n      let mqttmessage=JSON.stringify(a);\n      console.log(mqttmessage);\n      let topic=\"/User/general\";\n    await this.MQTTServ.sendMesagge(topic, mqttmessage);\n    let b=new MessageModel(this.nurseName,JSON.stringify(this.pacientLocal.id),  0, \"0\",5);\n    mqttmessage=JSON.stringify(b);    \n    await this.MQTTServ.sendMesagge(topic, mqttmessage);\n  \n    this.showNotes=true;    \n  \n   }\n\n\n   public goChat(){\n /*   this.router.navigate(['/chat/]);        */\n  this.router.navigate(['/chat/']);        \n   }\n}\n"],"names":[],"sourceRoot":"webpack:///"}