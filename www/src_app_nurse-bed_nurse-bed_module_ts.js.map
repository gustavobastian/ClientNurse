{"version":3,"file":"src_app_nurse-bed_nurse-bed_module_ts.js","mappings":"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","sources":["./src/app/nurse-bed/nurse-bed-routing.module.ts","./src/app/nurse-bed/nurse-bed.module.ts","./src/app/nurse-bed/nurse-bed.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NurseBedPage } from './nurse-bed.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NurseBedPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NurseBedPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NurseBedPageRoutingModule } from './nurse-bed-routing.module';\n\nimport { NurseBedPage } from './nurse-bed.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NurseBedPageRoutingModule\n  ],\n  declarations: [NurseBedPage]\n})\nexport class NurseBedPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { LocalStorageService } from '../services/local-storage.service';\nimport { MqttService } from '../services/mqtt.service';\nimport { PacientService } from '../services/pacient.service';\nimport { Storage } from '@capacitor/storage';\nimport { MessageModel } from '../models/message-model';\nimport { UserService } from '../services/user.service';\nimport { User } from '../models/user';\nimport { BedsService } from '../services/beds.service';\nimport { Bed } from '../models/bed';\n\n@Component({\n  selector: 'app-nurse-bed',\n  templateUrl: './nurse-bed.page.html',\n  styleUrls: ['./nurse-bed.page.scss'],\n})\nexport class NurseBedPage implements OnInit {\n  public BedLocal2: Bed = new Bed(0,0,0,0);\n  private bedId: number = 0;\n  private nurseName: string;  \n  private localNurse: User= new User(0,\"\",\"\",\"\",\"\",0,\"\");\n  public room: number;\n  public floor: number;\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    public localSto: LocalStorageService, \n    private pacientServ:PacientService,\n    public userLogged: UserService,\n    public bedLocal: BedsService,\n    public MQTTServ:MqttService) {\n\n    let d = this.activatedRoute.snapshot.params['id'];\n    this.bedId=this.bedLocal.getBedId();\n    console.log(\"bedId \"+d);\n\n  }\n\n  ngOnInit() {\n    this.getParams();\n\n    //this.getBedInfo();\n  }\n  async getParams() {\n    this.localNurse= this.userLogged.getUser();    \n    this.nurseName=this.localNurse.username;    \n    this.bedId=this.bedLocal.getBedId();    \n    this.getBedInfo();\n  }\n\n  \n\n  async getBedInfo(){\n  await console.log(\"inside:\" + this.nurseName)  \n\n  /** Preparing to get the response   *  */\n  let responseInfoTopic=\"/Beds/\"+this.bedId+\"/info\";  \n  this.MQTTServ.MQTTClientLocal.subscribe(responseInfoTopic).on(Message=>{\n      let localMessage = JSON.parse(Message.string);      \n      console.log(\"respuestaSystemBeds:  \"+localMessage[0]);\n      if(Message.toString()==\"Error\"){\n        this.MQTTServ.MQTTClientLocal.unsubscribe(responseInfoTopic);\n        this.floor = 0;\n        this.room = 0;      \n        return;\n      }\n      else{\n      this.floor = localMessage[0].floorId;\n      this.room = localMessage[0].roomId;      \n      this.MQTTServ.MQTTClientLocal.unsubscribe(responseInfoTopic)}\n    })  \n\n    \n\n  /** Ask for information about the bed *  */\n\n  let a=new MessageModel(this.nurseName,this.bedId.toString(),  0, \"0\",8);    \n  //console.log(a)\n  let mqttmessage=JSON.stringify(a);\n  console.log(\"Mensaje:\"+mqttmessage);\n  let topic=\"/Beds/\"+this.bedId+\"/messages\";\n  await this.MQTTServ.sendMesagge(topic, mqttmessage);\n  \n\n  \n  }\n\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}